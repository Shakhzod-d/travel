import React from "react";

interface Props {
  rating: number;
}

const Rating = ({ rating }: Props) => {
  // Yulduzchalar soni
  const totalStars = 5;

  // Har bir yulduz holatini aniqlash
  const stars = Array.from({ length: totalStars }, (_, index) => {
    const fullStar = index + 1 <= Math.floor(rating); // To'liq yulduz
    const halfStar = index + 1 > Math.floor(rating) && index + 1 <= rating; // Yarim yulduz

    return (
      <span
        key={index}
        style={{
          display: "inline-block",
          position: "relative",
          width: "20px",
          height: "21px",
        }}
      >
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="20"
          height="21"
          viewBox="0 0 20 21"
          fill="none"
        >
          <path
            d="M18.3203 9.43596L14.7969 12.511L15.8524 17.0891C15.9082 17.3284 15.8923 17.5789 15.8065 17.8092C15.7208 18.0396 15.5691 18.2395 15.3703 18.3841C15.1716 18.5286 14.9346 18.6114 14.6891 18.622C14.4436 18.6326 14.2004 18.5706 13.9899 18.4438L9.99689 16.0219L6.01252 18.4438C5.80202 18.5706 5.55881 18.6326 5.31328 18.622C5.06775 18.6114 4.83079 18.5286 4.63204 18.3841C4.4333 18.2395 4.28157 18.0396 4.19584 17.8092C4.1101 17.5789 4.09416 17.3284 4.15002 17.0891L5.20392 12.5157L1.6797 9.43596C1.49331 9.2752 1.35852 9.06298 1.29225 8.82592C1.22598 8.58886 1.23117 8.33751 1.30718 8.10339C1.38319 7.86927 1.52663 7.66281 1.71952 7.50988C1.9124 7.35696 2.14614 7.26439 2.39142 7.24378L7.03674 6.84143L8.85002 2.51643C8.94471 2.28949 9.10443 2.09564 9.30907 1.95929C9.51371 1.82294 9.75411 1.75018 10 1.75018C10.2459 1.75018 10.4863 1.82294 10.691 1.95929C10.8956 2.09564 11.0553 2.28949 11.15 2.51643L12.9688 6.84143L17.6125 7.24378C17.8578 7.26439 18.0915 7.35696 18.2844 7.50988C18.4773 7.66281 18.6207 7.86927 18.6968 8.10339C18.7728 8.33751 18.778 8.58886 18.7117 8.82592C18.6454 9.06298 18.5106 9.2752 18.3242 9.43596H18.3203Z"
            fill={fullStar || halfStar ? "#F79009" : "#e4e5e9"} // To'liq yoki yarim yulduz bo'lsa, rangli bo'ladi
          />
        </svg>
        {halfStar && (
          <span
            style={{
              position: "absolute",
              top: 0,
              left: 0,
              width: `${(rating % 1) * 100}%`, // Yulduzning qanchalik to'ldirilgan qismi (qismini bo'yash)
              height: "100%",
              overflow: "hidden",
            }}
          >
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="21"
              viewBox="0 0 20 21"
              fill="none"
            >
              <path
                d="M18.3203 9.43596L14.7969 12.511L15.8524 17.0891C15.9082 17.3284 15.8923 17.5789 15.8065 17.8092C15.7208 18.0396 15.5691 18.2395 15.3703 18.3841C15.1716 18.5286 14.9346 18.6114 14.6891 18.622C14.4436 18.6326 14.2004 18.5706 13.9899 18.4438L9.99689 16.0219L6.01252 18.4438C5.80202 18.5706 5.55881 18.6326 5.31328 18.622C5.06775 18.6114 4.83079 18.5286 4.63204 18.3841C4.4333 18.2395 4.28157 18.0396 4.19584 17.8092C4.1101 17.5789 4.09416 17.3284 4.15002 17.0891L5.20392 12.5157L1.6797 9.43596C1.49331 9.2752 1.35852 9.06298 1.29225 8.82592C1.22598 8.58886 1.23117 8.33751 1.30718 8.10339C1.38319 7.86927 1.52663 7.66281 1.71952 7.50988C1.9124 7.35696 2.14614 7.26439 2.39142 7.24378L7.03674 6.84143L8.85002 2.51643C8.94471 2.28949 9.10443 2.09564 9.30907 1.95929C9.51371 1.82294 9.75411 1.75018 10 1.75018C10.2459 1.75018 10.4863 1.82294 10.691 1.95929C10.8956 2.09564 11.0553 2.28949 11.15 2.51643L12.9688 6.84143L17.6125 7.24378C17.8578 7.26439 18.0915 7.35696 18.2844 7.50988C18.4773 7.66281 18.6207 7.86927 18.6968 8.10339C18.7728 8.33751 18.778 8.58886 18.7117 8.82592C18.6454 9.06298 18.5106 9.2752 18.3242 9.43596H18.3203Z"
                fill="#F79009"
              />
            </svg>
          </span>
        )}
      </span>
    );
  });

  return <div>{stars}</div>;
};

export default Rating;
